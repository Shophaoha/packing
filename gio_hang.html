<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop H·∫£o H√†</title>
    <link rel="icon" href="11zon_cropped (3).png" type="image/png">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        .header {
            position: fixed;
            top: 0;
            left: 0px;
            width: 98%;
            background-color: #cde0e9; /* Gi·ªØ nguy√™n m√†u n·ªÅn */
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000; /* ƒê·∫£m b·∫£o header hi·ªÉn th·ªã tr√™n c√πng */
        }
        .logo {
            display: flex;
            align-items: center;
        }
        .logo img {
            width: 50px;
            height: 50px;
            margin-right: 10px;
        }
        .nav {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .nav a {
            text-decoration: none;
            color: black;
            font-size: 16px;
            font-weight: bold;
            padding: 10px;
            position: relative;
        }
        .nav a:hover {
            color: #d9534f;
        }
        .dropdown {
            position: relative;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            text-align: left;
            z-index: 10;
        }
        .dropdown-content a {
            display: block;
            padding: 10px;
            color: black;
            text-decoration: none;
        }
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .dropdown::after {
            content: '\25BC';
            font-size: 12px;
            margin-left: -10px;
        }
        .banner {
            width: 100%;
            height: 570px;
            background-attachment: fixed;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .about h2 {
            text-align: center;
            width: 100%;
        }
        .marquee {
            background-color: #ffcc00;
            padding: 10px;
            font-size: 18px;
            font-weight: bold;
            color: black;
            white-space: nowrap;
            overflow: hidden;
        }
        .marquee span {
            display: inline-block;
            animation: marquee 10s linear infinite;
        }
        @keyframes marquee {
            from { transform: translateX(100%); }
            to { transform: translateX(-100%); }
        }
        .about {
            max-width: 848px;
            margin: 40px auto;
            text-align: left;
        }
        .category {
            /* ... (c√°c style kh√°c c·ªßa b·∫°n) ... */
            border: 1px solid #ddd; /* Th√™m vi·ªÅn cho m·ªói m·ª•c */
            border-radius: 8px; /* Bo tr√≤n g√≥c vi·ªÅn (t√πy ch·ªçn) */
            padding: 10px; /* Th√™m padding ƒë·ªÉ t·∫°o kho·∫£ng c√°ch gi·ªØa vi·ªÅn v√† n·ªôi dung */
            border: 3px solid #00ff00;    
            
        }
        .category a p {
            font-size: 18px; /* TƒÉng k√≠ch th∆∞·ªõc ch·ªØ */
            font-weight: bold; /* L√†m ch·ªØ ƒë·∫≠m */
            color: #42719c; /* Ch·ªçn m√†u ch·ªØ (t√πy ch·ªçn) */
            margin-top: 10px; /* Th√™m kho·∫£ng c√°ch v·ªõi h√¨nh ·∫£nh (t√πy ch·ªçn) */
            text-decoration: none;
        }
        .category-section {
            max-width: 1200px;
            margin: 40px auto;
            text-align: center;
        }
        .categories {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .category:hover {
            transform: translateY(-5px); /* Di chuy·ªÉn ph·∫ßn t·ª≠ l√™n 5px khi hover */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0.7;
        }
        .category img {
            width: 220px;
            height: auto;
            border-radius: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .view-now {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7); /* M√†u n·ªÅn ƒëen m·ªù */
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            opacity: 0; /* ·∫®n ch·ªØ "Xem ngay" ban ƒë·∫ßu */
        }

        .category:hover .view-now {
            opacity: 1; /* Hi·ªÉn th·ªã ch·ªØ "Xem ngay" khi hover */
        }

        .features {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Chia l√†m 2 c·ªôt */
            gap: 20px;
            margin: 40px auto;
            max-width: 800px;
        }

        .feature-box {
            display: flex;
            align-items: center;
            background: #f9f9f9;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .feature-box:hover {
            transform: translateY(-5px);
            box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.15);
        }

        .icon {
            font-size: 30px;
            margin-right: 15px;
        }

        .feature-box h3 {
            font-size: 18px;
            margin: 0;
            color: #d9534f;
        }

        .feature-box p {
            font-size: 14px;
            color: #555;
            margin: 5px 0 0;
        }
        .menu-toggle {
            display: none;
            font-size: 30px;
            cursor: pointer;
            background: none;
            border: none;
        }
        
        .nav.show {
            display: flex;
        }

        /*Gio hang*/
        .cart-container {
            margin-top: 200px; /* ƒêi·ªÅu ch·ªânh gi√° tr·ªã n√†y t√πy theo chi·ªÅu cao thanh trang ch·ªß */
        }

        .empty-cart {
            text-align: center;
            padding: 20px;
            
        }

        .empty-cart img {
            width: 150px;
            margin-bottom: 10px;
            padding-top: 80px;
        }

        .empty-cart p {
            font-size: 18px;
            color: #888;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #ff5722;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }

        /* Ph·∫ßn cookie*/
        .cookie-container {
            position: fixed;
            top: 40%;
            left: 50%;
            transform: translateX(-50%);
            background:rgb(219, 190, 190);
            color: rgb(235, 223, 223);
            padding: 15px;
            border-radius: 5px;
            display: none; /* ·∫®n ban ƒë·∫ßu */
            z-index: 1000;
        }

        .cookie-container button {
            margin-left: 10px;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
        }

        #accept-cookie {
            background: rgb(103, 250, 103);
            color: white;
        }

        #decline-cookie {
            background: rgb(248, 220, 220);
            color: white;
        }

        .cart-icon {
          display: none;
        }

        /* Hi·ªán th·ªã gi·ªè h√†ng*/
        .cart-items {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: flex-start;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            flex: 1 1 calc(50% - 20px); /* Hi·ªÉn th·ªã 2 s·∫£n ph·∫©m m·ªói h√†ng */
            max-width: 450px;
            margin-top: 100px;
        }

        .cart-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            margin-top: 100px;
        }

        .item-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        button {
            cursor: pointer;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
        }

        .decrease, .increase {
            background-color: #ddd;
        }

        .remove-item {
            background-color: #d9534f;
            color: white;
        }


    .cart-container_test {
      max-width: 1200px;
      margin: 20px auto;
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-top:100px;
    }
    .cart-title_test {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #333;
    }
    .cart-header_test {
      display: flex;
      align-items: center;
      border-bottom: 1px solid #f0f0f0;
      padding-bottom: 10px;
      margin-left: 3px;
      font-size: 12px;
      color: #999;
    }
    .cart-header_test div {
      text-align: center;
    }
    .header-check_test { width: 60px; scale: 1.2;}
    .header-product_test { flex: 1; margin-right:580px; }
    .header-price_test,
    .header-qty_test,
    .header-total_test,
    .header-action_test {
      width: 120px;
    }
    .shop-row_test {
      background-color: #cbdde9;
      display: flex;
      align-items: center;
      padding: 10px 0;
      margin-left:6px;
    }
    .shop-row_test input[type="checkbox"] {
      margin-left: 20px;
      margin-right: 10px;
      transform: scale(1.2);
    }
    .shop-name_test {
      font-size: 18px;
      font-weight: bold;
      margin-left: 10px;
      color: #000;               /* ‚úÖ ch·ªØ m√†u ƒëen */
      background-color: #cde0e9;
      padding: 5px 10px;
      border-radius: 4px;
      display: inline-block;
    }
    .deal-row_test {
      display: flex;
      align-items: center;
      padding: 10px;
      font-weight: bold;
      color: #d0021b;
      margin-top: 10px;
    }
    .deal-label_test {
      margin-left: 55px;
      font-size: 16px;
      border-bottom: 2px solid #ffd54f;
      padding-bottom: 2px;
    }
    .product-row_test {
      display: flex;
      flex-direction: row;
      align-items: center;
      background: #fff; /* n·ªÅn tr·∫Øng */
      border-radius: 8px; /* ‚úÖ bo tr√≤n g√≥c */
      margin: 10px 0; /* ‚úÖ kho·∫£ng c√°ch gi·ªØa c√°c s·∫£n ph·∫©m */
      padding: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* ‚úÖ ƒë·ªï b√≥ng nh·∫π */
    }
    .product-check_test { width: 60px; text-align: center; }
    .product-info_test {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .product-info_test img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .product-detail_test {
      font-size: 14px;
    }
    .product-name_test {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .product-price_test,
    .product-qty_test,
    .product-total_test,
    .product-action_test {
      width: 120px;
      text-align: center;
    }
    .product-price_test,
    .product-total_test {
      color: #ee4d2d;
      font-weight: bold;
    }
    .quantity-controls_test {
      display: inline-flex;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .quantity-controls_test button {
      width: 30px;
      height: 30px;
      border: none;
      background: #f0f0f0;
      cursor: pointer;
    }
    .quantity-controls_test input[type="number"] {
      width: 40px;
      border: none;
      text-align: center;
      outline: none;
    }
    .remove-btn_test {
      background: none;
      border: none;
      color: #ff424e;
      text-decoration: underline;
      cursor: pointer;
      font-size: 14px;
    }
    .cart-summary_test {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 15px 0;
      gap: 10px;
    }
    .summary-amoun_test {
      font-size: 16px;
      font-weight: bold;
      color: #ee4d2d;
    }
    .checkout-btn_test {
      background: #ee4d2d;
      color: #fff;
      border: none;
      padding: 8px 20px;
      border-radius: 4px;
      cursor: pointer;
    }
    .size-select, .material-select {
      font-size: 14px;
      padding: 5px 8px;
      min-width: 100px; /* ‚úÖ th√™m d√≤ng n√†y ƒë·ªÉ n√≥ gi√£n ra */
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: white;
      cursor: pointer;
    }
    .product-extra {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      align-items: center;
      margin-top: 5px;
      font-size: 12px;
      color: #555;
    }


#checkout-popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  z-index: 10000;
  overflow-y: auto;
  padding-top: 60px;
  padding-bottom: 40px;
  box-sizing: border-box;
}

.checkout-form {
  position: relative;
  background: #fff;
  padding: 20px;
  width: 90%;
  max-width: 500px;
  border-radius: 10px;
  text-align: left;
}

.checkout-form h2, .checkout-form h3 {
  text-align: center;
}

.checkout-form input, .checkout-form textarea {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.checkout-form button {
  margin-top: 10px;
  padding: 10px;
  width: 48%;
  font-weight: bold;
  cursor: pointer;
}

#confirm-checkout {
  background: #28a745;
  color: #fff;
  border: none;
}

#close-checkout {
  background: #dc3545;
  color: #fff;
  border: none;
}

#address {
  width: 100%;
  box-sizing: border-box;
}


.row-2 {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.row-2 .form-group {
  flex: 1;
  min-width: 0;
}

.row-2 .form-group input {
  width: 100%;
  box-sizing: border-box; /* ‚úÖ ƒë·∫£m b·∫£o padding kh√¥ng ƒë·∫©y input ra ngo√†i */
}

.payment-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 20px;
  margin-bottom: 15px;
}

.payment-label {
  font-weight: bold;
  white-space: nowrap;
}

.payment-methods {
  display: flex;
  gap: 10px;
}

.payment-option {
  padding: 8px 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  background: #fff;
  font-size: 12px;
}

.payment-option.active {
  border: 2px solid #f60;
  background: #fff5f0;
  color: #f60;
  position: relative;
}

.payment-option.active::after {
  content: "‚úì";
  position: absolute;
  bottom: 4px;
  right: 8px;
  font-size: 12px;
}

.checkout-form h3 {
  text-align: left; /* üî• cƒÉn tr√°i ti√™u ƒë·ªÅ */
  margin-top: 20px;
  font-size:16px;
}

.checkout-cart-items {
  margin-top: 10px;
}

.checkout-cart-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid #eee;
}

.checkout-cart-item img {
  width: 50px;
  height: 50px;
  object-fit: cover;
  border-radius: 5px;
}

.checkout-cart-item-name {
  flex: 2;
  font-weight: bold;
  font-size: 14px;
}

.checkout-cart-item-price,
.checkout-cart-item-qty,
.checkout-cart-item-total {
  flex: 1;
  font-size: 13px;
  text-align: center;
}
.payment-instruction {
  margin-top: 20px;
  text-align: center;
}

.payment-instruction h3 {
  color: #28a745;
  margin-bottom: 15px;
}

.qr-code {
  width: 400px;
  height: 400px;
  object-fit: contain;
  margin-bottom: 15px;
}

.bank-info {
  text-align: left;
  margin: 15px 0;
  font-size: 14px;
}

.bank-info p {
  margin: 4px 0;
}

.upload-proof {
  margin-top: 15px;
  text-align: left;
  font-size: 14px;
}

.upload-proof input[type="file"] {
  margin-top: 5px;
}


    @media (max-width: 600px) {
            .features {
                grid-template-columns: 1fr;
            }
        }
    @media (max-width: 1000px) { /* Thay ƒë·ªïi 768px th√†nh k√≠ch th∆∞·ªõc ph√π h·ª£p */
            .category {
                width: 38%; /* Ho·∫∑c m·ªôt gi√° tr·ªã ph·∫ßn trƒÉm ph√π h·ª£p */
                margin-bottom: 20px; /* Th√™m kho·∫£ng c√°ch gi·ªØa c√°c h√†ng (t√πy ch·ªçn) */
                margin-right: 20px;
            }
            .categories {
                justify-content: center; /* CƒÉn gi·ªØa c√°c m·ª•c khi xu·ªëng h√†ng */
            }
            .header {
                padding: 10px; /* Gi·∫£m padding */
                display: flex;
                justify-content: flex-start; /* CƒÉn tr√°i */
                align-items: center;
            }
            .logo img {
                width: 40px; /* Gi·∫£m k√≠ch th∆∞·ªõc logo */
                height: 40px;
            }
            .logo h2 {
                font-size: 1.2em; /* Gi·∫£m k√≠ch th∆∞·ªõc ph√¥ng ch·ªØ */
            }
            .nav {
                display: none; /* ·∫®n menu ƒëi·ªÅu h∆∞·ªõng */
                flex-direction: column;
                position: absolute; 
                top: 60px;
                left: 0;
                background: white;
                width: 200px;
                box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
                padding: 10px;
            }

            .nav a {
                display: block;
                padding: 10px;
                text-align: left;
            }
            .menu-toggle {
                display: block; /* Hi·ªÉn th·ªã n√∫t menu tr√™n mobile */
                margin-right: 20px;
            }
            .banner {
                width: 100%;
                height: 300px; /* Gi·∫£m chi·ªÅu cao banner */
            }
            .nav.show {
                display: flex;
            }

            .dropdown-content {
                position: absolute;
                top: 0;
                right: -200px; /* ƒê·∫£m b·∫£o menu con c≈©ng n·∫±m b√™n tr√°i */
                background: white;
                width: 180px; /* ƒê·ªô r·ªông menu con */
                min-height: 100%;
                box-shadow: -2px 0px 10px rgba(0, 0, 0, 0.2); /* ƒê·ªï b√≥ng b√™n tr√°i */
                display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            }

            .dropdown:hover .dropdown-content {
                display: block; /* Hi·ªÉn th·ªã khi hover */
            }

            .dropdown-content a {
                display: block;
                padding: 10px;
                text-align: left;
            }

            .cart-icon {
                display: block;
                position: absolute;
                right: 30px;
                top: 10px;
                font-size: 30px;
                color: #333;
                cursor: pointer;
                z-index: 1001;
            }

            .cart-icon a {
                text-decoration: none;
                color: inherit;
            }

            #cart-count {
                background: red;
                color: white;
                font-size: 12px;
                border-radius: 50%;
                padding: 2px 6px;
                position: absolute;
                top: -6px;
                right: -18px;
            }

            .cart-header_test {
              display: none; /* ·∫®n ti√™u ƒë·ªÅ b·∫£ng */
            }

            .product-row_test {
              flex-direction: row;
              align-items: center;
              padding: 10px;
              margin: 10px 0;
              background: #fff;
              border-radius: 8px;
              box-shadow: 0 2px 8px rgba(0,0,0,0.1);
              position: relative;
            }

            .product-check_test {
              position: absolute;
              left: -1px;
              transform: scale(1.2);
            }

            .product-info_test {
              margin-left: 40px;
              display: flex;
              gap: 10px;
              flex: 1;
              align-items: center;
            }

            .product-info_test img {
              width: 80px;
              height: 80px;
              border-radius: 4px;
              object-fit: cover;
            }

            .product-detail_test {
              display: flex;
              flex-direction: column;
              justify-content: center;
              flex: 1;
            }

            .product-name_test {
              font-weight: bold;
              font-size: 15px;
              color: #333;
              text-align: left;
              margin-bottom: 5px;
            }

            .product-bottom_test {
              display: flex;
              justify-content: space-between;
              align-items: center;
            }

            .product-price_test {
              color: #ee4d2d;
              font-weight: bold;
              font-size: 16px;
              margin-left: 5px;
            }

            .quantity-controls_test {
              display: flex;
              border: 1px solid #ccc;
              border-radius: 4px;
            }

            .quantity-controls_test button {
              width: 30px;
              height: 30px;
              background: #f0f0f0;
              border: none;
              cursor: pointer;
            }

            .quantity-controls_test input[type="number"] {
              width: 40px;
              border: none;
              text-align: center;
              outline: none;
            }

            /* ·∫®n nh·ªØng ph·∫ßn kh√¥ng c·∫ßn */
            .product-qty_test, 
            .product-total_test, 
            .product-extra, 
            .product-action_test {
              display: none;
            }
        } 
    @media (max-width: 576px) {
            .category {
                width: 60%; /* M·ªói m·ª•c chi·∫øm to√†n b·ªô chi·ªÅu r·ªông */
            }
        }
    @media screen and (max-width: 768px){ 
      #checkout-popup {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.5);
        overflow-y: auto;      /* ‚úÖ cho ph√©p cu·ªôn n·ªôi dung d√†i */
        z-index: 10000;
        padding: 40px 0;       /* ‚úÖ ƒë·∫©y form ra gi·ªØa theo chi·ªÅu d·ªçc, kh√¥ng b·ªã s√°t m√©p */
        box-sizing: border-box;
      }
      .checkout-form {
        background: #fff;
        padding: 20px;
        width: 90%;
        max-width: 500px;
        margin: 0 auto;
        border-radius: 10px;
        margin: auto;         /* ‚úÖ cƒÉn gi·ªØa theo chi·ªÅu ngang */
      }
    }
    </style>
</head>
<body>
    <div class="header">
        <div class="menu-toggle">‚ò∞</div>  
        <div class="logo">
            <img src="11zon_cropped (3).png" alt="Logo Shop H·∫£o H√†" width="50" height="50">
            <h2>Shop H·∫£o H√†</h2>
        </div>      
        <div class="nav">
            <a href="index.html">Trang Ch·ªß</a>
            <div class="dropdown">
                <a href="#">Danh M·ª•c S·∫£n Ph·∫©m</a>
                <div class="dropdown-content">
                    <a href="hut-chan-khong.html">H√∫t Ch√¢n Kh√¥ng</a>
                    <a href="co-mang-pof-pvc.html">Co M√†ng POF/PVC</a>
                    <a href="indate-san-pham.html">Indate S·∫£n Ph·∫©m</a>
                    <a href="dong-dai-pp-pet.html">ƒê√≥ng ƒêai PP/PET</a>
                </div>
            </div>
            <a href="gui_lien_he.html">G·ª≠i Li√™n H·ªá</a>
            <a href="gio_hang.html">Gi·ªè H√†ng</a>
        </div>
        <div class="cart-icon" id="cart-icon">
          <a href="gio_hang.html">
            üõí <span id="cart-count">0</span>
          </a>
        </div>
    </div>

    <div id="cart-container">
        <div id="empty-cart" class="empty-cart">
            <img src="Image\Gio hang\empty-cart.png" alt="Gi·ªè h√†ng tr·ªëng">
            <p>Gi·ªè h√†ng c·ªßa b·∫°n c√≤n tr·ªëng</p>
            <a href="hut-chan-khong.html" class="btn">Mua s·∫Øm ngay</a>
        </div>
        <div id="cart-items" class="cart-items" style="display: none;">
            <!-- Danh s√°ch s·∫£n ph·∫©m trong gi·ªè h√†ng s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->
        </div>
    </div>

    <div class="cart-container_test" id="cart-container_test"></div>

    <div id="cookie-popup" class="cookie-container">
        <p>Ch√∫ng t√¥i s·ª≠ d·ª•ng cookie ƒë·ªÉ c·∫£i thi·ªán tr·∫£i nghi·ªám c·ªßa b·∫°n. B·∫°n c√≥ ƒë·ªìng √Ω kh√¥ng?</p>
        <button id="accept-cookie">ƒê·ªìng √Ω</button>
        <button id="decline-cookie">T·ª´ ch·ªëi</button>
    </div>    
    

   <div id="image-popup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:2000;">
      <div style="position:relative;">
        <img id="popup-img" tabindex="-1" src="" style="width:805px; height:728px; user-select: none; object-fit:contain; border-radius:10px;">
        <button id="close-popup" tabindex="-1" style="position:absolute; user-select: none; top:-50px; right:-50px; background:none; color:white; border:none; font-size:28px; cursor:pointer;">‚úñ</button>
      </div>
    </div>      

    <div id="checkout-popup" style="display:none;">
      <div class="checkout-overlay"></div>
      <div class="checkout-form">
        <button id="close-popup-btn" style="  position: absolute;top: 3px;right: -90px;background: none;border: none;font-size: 14px;font-weight: bold;color: #666;cursor: pointer;z-index: 10001;">‚úñ</button>
        <h2>X√°c nh·∫≠n ƒë∆°n h√†ng</h2>
        <form id="form" method="POST" action="https://docs.google.com/spreadsheets/d/1LgbXfj8cGfcE2DBuNctW94d_2EFaitzQP_84BiL2y0Y/edit?gid=0#gid=0">
          <div class="row-2">
            <div class="form-group">
              <input type="name" id="name" name="name" autocomplete="name" placeholder="H·ªç T√™n" required>
            </div>
            <div class="form-group">
              <input type="tel" id="phone" name="phone" autocomplete="tel" placeholder="Nh·∫≠p SDT" required>
            </div>
          </div>
          
          <textarea type="address" id="address" name="address" autocomplete="address" placeholder="ƒê·ªãa ch·ªâ giao h√†ng" required></textarea>
          
          <h3>ƒê∆°n h√†ng c·ªßa b·∫°n:</h3>
          <div id="checkout-cart-items"></div>
          <div style="text-align: right;">
            <p><strong>T·ªïng ti·ªÅn (ch∆∞a t√≠nh ship):</strong> <span id="order-total" >0ƒë</span></p>
            <p><strong>Thanh to√°n l·∫ßn n√†y:</strong> <span id="first-payment">0ƒë</span></p>
          </div>
          
          <div class="payment-row">
            <div class="payment-label">Ph∆∞∆°ng th·ª©c thanh to√°n:</div>
            <div class="payment-methods">
              <div class="payment-option" data-value="50">ƒê·∫∑t c·ªçc 50%</div>
              <div class="payment-option" data-value="100">Thanh to√°n 100%</div>
            </div>
          </div>
          <div class="payment-instruction">
            <h3>Ti·∫øn h√†nh thanh to√°n</h3>
  
            <img src="qr.jpg" alt="QR Ng√¢n h√†ng" class="qr-code">
          
            <div class="bank-info">
              <p><strong>Ng√¢n h√†ng:</strong> Shinhan Bank</p>
              <p><strong>S·ªë t√†i kho·∫£n:</strong> 0773759705</p>
              <p><strong>T√™n t√†i kho·∫£n:</strong> Nguy·ªÖn Cao K·ª≥</p>
              <p><strong>N·ªôi dung chuy·ªÉn kho·∫£n:</strong> <span id="transfer-content" >[SƒêT] + ƒê·∫∑t c·ªçc 50%</span></p>
              <p><strong>S·ªë ti·ªÅn c·∫ßn chuy·ªÉn:</strong> <span id="transfer-amount" >0ƒë</span></p> 
            </div>
        
          </div>        
          <input type="hidden" id="payment-selected" value="50">
          
          <div class="checkout-buttons">
            <button type="submit"id="confirm-checkout">X√°c Nh·∫≠n ƒê·∫∑t H√†ng</button>
            <button id="close-checkout">H·ªßy</button>
          </div>        
        </form>
      </div>    
    </div>

    <script type="module">
        import products from './products.js';
        const { hck_products, cm_products, indate_products, dongdai_products } = products;
        
        let cartData = [];
        const menuToggle = document.querySelector('.menu-toggle');
        const nav = document.querySelector('.nav');

        menuToggle.addEventListener('click', () => {
          nav.classList.toggle('show');
        });
        
        function getCookie(name) {
          const cookies = document.cookie.split('; ');
          for (let cookie of cookies) {
            const [key, value] = cookie.split('=');
            if (key === name) return decodeURIComponent(value);
          }
          return null;
        }

        // ========== üì¶ Hi·ªÉn th·ªã bi·ªÉu t∆∞·ª£ng gi·ªè h√†ng & danh s√°ch s·∫£n ph·∫©m khi hover ==========
        function loadCartFromCookie() {
            const cookie = getCookie("cart");
            if (!cookie) return [];
            try {
                return JSON.parse(decodeURIComponent(cookie));
            } catch (e) {
                return [];
            }
        }

        function updateCartIcon() {
            const cartItems = loadCartFromCookie();
            const countEl = document.getElementById("cart-count");

            if (!countEl) return;

            // Hi·ªÉn th·ªã s·ªë lo·∫°i s·∫£n ph·∫©m (s·ªë d√≤ng kh√°c nhau trong gi·ªè h√†ng)
            countEl.textContent = cartItems.length;
        }

        // G·ªçi khi trang load
        document.addEventListener("DOMContentLoaded", updateCartIcon);
        
        console.log("D·ªØ li·ªáu gi·ªè h√†ng trong cookie:", getCookie("cart"));
        
        function setCookie(name, value, days) {
          const date = new Date();
          date.setTime(date.getTime() + (days * 86400000));
          document.cookie = `${name}=${encodeURIComponent(value)}; expires=${date.toUTCString()}; path=/`;
        }
    
        function loadCart() {
          try {
            cartData = JSON.parse(getCookie("cart") || "[]");
          } catch { cartData = []; }
        }
        
        function saveCart() {
          setCookie("cart", JSON.stringify(cartData), 30);
        }
        
        function calculateCheckedTotal() {
          const rows = document.querySelectorAll(".product-row_test");
          let total = 0;
          rows.forEach(row => {
            const checkbox = row.querySelector(".check-item");
            const index = parseInt(row.dataset.index); // ‚úÖ l·∫•y index g·ªëc
            if (checkbox.checked) {
              total += cartData[index].price * cartData[index].quantity;
            }
          });
          document.querySelector(".summary-amoun_testt").innerText = total.toLocaleString() + "ƒë";
        }
        
        function updateProductPrice(i) {
          const item = cartData[i];
          const product = getProductDef(item.id);
          let price = 0;
          const sizeIndex = product.sizes.indexOf(item.size);
        
          if (product.materials.length > 0) {
            price = product.prices[item.material]?.[sizeIndex] || 0;
          } else {
            price = product.prices[sizeIndex] || 0;
          }
        
          item.price = price;
        
          const row = document.querySelector(`.product-row_test[data-index="${i}"]`);
          row.querySelector(".product-price_test").innerText = price.toLocaleString() + "ƒë";
          row.querySelector(".product-total_test").innerText = (price * item.quantity).toLocaleString() + "ƒë";
        
          let imageSrc = item.image;
          if (product.materials.length > 0 && product.image[item.material]) {
            imageSrc = product.image[item.material][sizeIndex];
          } else if (Array.isArray(product.image)) {
            imageSrc = product.image[sizeIndex];
          }
          row.querySelector("img").src = imageSrc;
          item.image = imageSrc;
        
          saveCart();
          calculateCheckedTotal();
        }
        
        function getShopNameByNumber(number) {
          number = parseInt(number);
          switch (number) {
            case 1: return "H√∫t Ch√¢n Kh√¥ng";
            case 2: return "Co M√†ng Bao B√¨";
            case 3: return "Indate S·∫£n Ph·∫©m";
            case 4: return "ƒê√≥ng ƒêai PP/PET";
            default: return "Shop Kh√¥ng X√°c ƒê·ªãnh";
          }
        }
        
        function renderCart() {
          loadCart();
          document.getElementById("empty-cart").style.display = cartData.length === 0 ? "block" : "none";
          document.getElementById("cart-items").style.display = cartData.length === 0 ? "none" : "flex";
          document.getElementById("cart-container_test").style.display = cartData.length === 0 ? "none" : "block";

          const checkedIndexes = new Set();
          document.querySelectorAll(".product-row_test .check-item:checked").forEach(cb => {
            const row = cb.closest(".product-row_test");
            if (row) checkedIndexes.add(parseInt(row.dataset.index));
          });

          const container = document.getElementById("cart-container_test");
          container.innerHTML = '';
        
          if (cartData.length === 0) {
            container.innerHTML = '<p style="text-align:center; color:#999; font-size:18px;">Gi·ªè h√†ng tr·ªëng.</p>';
            return;
          }
        
          const header = document.createElement('div');
          header.className = 'cart-header_test';
          header.innerHTML = `
            <div class="header-check_test"><input type="checkbox" id="check-all"/></div>
            <div class="header-product_test">S·∫¢N PH·∫®M</div>
            <div class="header-price_test">ƒê∆†N GI√Å</div>
            <div class="header-qty_test">S·ªê L∆Ø·ª¢NG</div>
            <div class="header-total_test">S·ªê TI·ªÄN</div>
            <div class="header-action_test">THAO T√ÅC</div>
          `;
          container.appendChild(header);

          function getProductDef(itemId) {
            return hck_products[itemId] || cm_products[itemId] || indate_products[itemId] || dongdai_products[itemId];
          }
        
          const shopNumbers = [...new Set(cartData.map(item => getProductDef(item.id)?.number))];
        
          shopNumbers.forEach(number => {
            const shopName = getShopNameByNumber(number);
            const shopBlock = document.createElement('div');
            shopBlock.className = 'shop-row_test';
            shopBlock.innerHTML = `<input type="checkbox" class="check-group" data-shop="${number}"/><span class="shop-name_test">${shopName}</span>`;
            container.appendChild(shopBlock);
        
            let categories = [...new Set(cartData.filter(item => getProductDef(item.id)?.number === number).map(item => item.category))];

            // ∆Øu ti√™n s·∫Øp x·∫øp: V·∫≠t T∆∞ tr∆∞·ªõc, M√°y M√≥c sau
            categories.sort((a, b) => {
              const priority = { "V·∫≠t t∆∞": 1, "V·∫≠t T∆∞": 1, "M√°y M√≥c": 2 };
              return (priority[a] || 99) - (priority[b] || 99);
            });

        
            categories.forEach(category => {
              const products = cartData.filter(item => getProductDef(item.id)?.number === number && item.category === category);
              if (products.length === 0) return;

              const dealBlock = document.createElement('div');
              dealBlock.className = 'deal-row_test';
              dealBlock.innerHTML = `<div class="deal-label_test">${category}</div>`;
              container.appendChild(dealBlock);
        
              products.forEach((item, index) => {
                const productDef = getProductDef[item.id];
                let sizeOptions = '';
                let materialOptions = '';
        
                // N·∫øu productDef c√≥ sizes
                if (productDef?.sizes?.length > 0) {
                  sizeOptions = `
                    <select class="size-select">
                      ${productDef.sizes.map(s => `<option value="${s}" ${s === item.size ? 'selected' : ''}>${s}</option>`).join('')}
                    </select>
                  `;
                }
                // N·∫øu kh√¥ng c√≥ sizes nh∆∞ng item.size c√≥ th√¨ hi·ªán text size
                else if (item.size && item.size !== 'M·∫∑c ƒë·ªãnh') {
                  sizeOptions = `<span>${item.size}</span>`;
                }

                // N·∫øu productDef c√≥ materials
                if (productDef?.materials?.length > 0) {
                  materialOptions = `
                    <select class="material-select">
                      ${productDef.materials.map(m => `<option value="${m}" ${m === item.material ? 'selected' : ''}>${m}</option>`).join('')}
                    </select>
                  `;
                }
                // N·∫øu kh√¥ng c√≥ materials nh∆∞ng item.material c√≥ th√¨ hi·ªán text material
                else if (item.material && item.material !== 'M·∫∑c ƒë·ªãnh') {
                  materialOptions = `<span>${item.material}</span>`;
                }
                
                const isChecked = checkedIndexes.has(cartData.indexOf(item)) ? 'checked' : '';
                const row = document.createElement('div');
                row.className = 'product-row_test';
                row.dataset.index = cartData.indexOf(item);
                row.innerHTML = `
                  <div class="product-check_test"><input type="checkbox" class="check-item"${isChecked}/></div>
                  <div class="product-info_test">
                    <img src="${item.image}" alt="${item.name}">
                    <div class="product-detail_test">
                      <div class="product-name_test">${item.name}</div>
                      <div class="product-extra">Ph√¢n lo·∫°i: ${sizeOptions} ${materialOptions}</div>
                    </div>
                  </div>
                  <div class="product-price_test">${item.price.toLocaleString()}ƒë</div>
                  <div class="product-qty_test">
                    <div class="quantity-controls_test">
                      <button class="dec-btn">-</button>
                      <input type="number" value="${item.quantity}" min="1">
                      <button class="inc-btn">+</button>
                    </div>
                  </div>
                  <div class="product-total_test">${(item.price * item.quantity).toLocaleString()}ƒë</div>
                  <div class="product-action_test"><button class="remove-btn_test">X√≥a</button></div>
                `;
                container.appendChild(row);
              });
            });
        
          });
        
          const summary = document.createElement('div');
          summary.className = 'cart-summary_test';
          summary.innerHTML = `
            <span class="summary-text">T·ªïng:</span>
            <span class="summary-amoun_testt">0ƒë</span>
            <button class="checkout-btn_test">Mua H√†ng</button>
          `;
          container.appendChild(summary);
        
          attachEvents();
          attachCheckboxEvents();
          calculateCheckedTotal();
        }
        
        function adaptMobileView() {
          if (window.innerWidth <= 1000) {
            document.querySelectorAll('.product-row_test').forEach(row => {
              const detail = row.querySelector('.product-detail_test');
              const itemIndex = parseInt(row.dataset.index);
              const item = cartData[itemIndex];

              if (!detail.querySelector('.product-bottom_test')) {
                const nameText = item.name || '';
                const classifyText = (item.size && item.size !== 'M·∫∑c ƒë·ªãnh' ? item.size : '') +
                                    (item.material && item.material !== 'M·∫∑c ƒë·ªãnh' ? ' - ' + item.material : '');
                const totalText = (item.price * item.quantity).toLocaleString() + 'ƒë';
                const qtyHTML = row.querySelector('.quantity-controls_test')?.outerHTML || '';

                detail.innerHTML = `
                  <div class="product-name_test" style="font-weight:bold; margin-bottom:5px; text-align:left;">${nameText}</div>
                  <div class="product-classify_test" style="font-size:12px; color:#666; margin-bottom:8px; text-align:left;">
                    Ph√¢n lo·∫°i: ${classifyText}
                  </div>
                  <div class="product-bottom_test" style="display:flex; justify-content:space-between; align-items:center;">
                    <div style="color:#ee4d2d; font-weight:bold; font-size:16px;">${totalText}</div>
                    <div style="display:flex; align-items:center; justify-content:center;">
                      ${qtyHTML}
                    </div>
                  </div>
                `;

                // Th√™m n√∫t X xo√° nh·ªè m·ªù
                if (!row.querySelector('.remove-btn-mobile')) {
                  const removeBtn = document.createElement('button');
                  removeBtn.innerHTML = '‚úñ';
                  removeBtn.className = 'remove-btn-mobile';
                  removeBtn.style.cssText = `
                    position: absolute;
                    top: 8px;
                    right: 10px;
                    background: none;
                    color: #aaa;
                    border: none;
                    font-size: 10px;
                    cursor: pointer;
                    opacity: 0.7;
                  `;
                  removeBtn.addEventListener('click', () => {
                    cartData.splice(itemIndex, 1);
                    saveCart();
                    renderCart();
                    adaptMobileView();
                  });
                  row.appendChild(removeBtn);
                }
              }
        });

    // ·∫®n layout PC
    document.querySelectorAll('.product-price_test, .product-qty_test, .product-total_test, .product-action_test, .product-extra').forEach(e => {
      if (e) e.style.display = 'none';
    });
    attachEvents();
  }
}

        function attachEvents() {
          document.querySelectorAll(".dec-btn").forEach(btn => {
            btn.addEventListener("click", () => {
              const row = btn.closest(".product-row_test");
              const index = parseInt(row.dataset.index);
              if (cartData[index].quantity > 1) {
                cartData[index].quantity--;
                saveCart();
                renderCart();
                adaptMobileView(); 
              }
            });
          });
        
          document.querySelectorAll(".inc-btn").forEach(btn => {
            btn.addEventListener("click", () => {
              const row = btn.closest(".product-row_test");
              const index = parseInt(row.dataset.index);
              cartData[index].quantity++;
              saveCart();
              renderCart();
              adaptMobileView(); 
            });
          });
        
          document.querySelectorAll(".remove-btn_test").forEach(btn => {
            btn.addEventListener("click", () => {
              const row = btn.closest(".product-row_test");
              const index = parseInt(row.dataset.index);
              cartData.splice(index, 1);
              saveCart();
              renderCart();
              adaptMobileView(); 
            });
          });

        
          document.querySelectorAll(".product-qty_test input[type='number']").forEach(input => {
            input.addEventListener("input", () => {
              const row = input.closest(".product-row_test");
              const index = parseInt(row.dataset.index);
              let val = parseInt(input.value);
              if (isNaN(val) || val < 1) val = 1;
              cartData[index].quantity = val;
              saveCart();

              row.querySelector(".product-total_test").innerText = (cartData[index].price * val).toLocaleString() + "ƒë";
              calculateCheckedTotal();
            });
          });
        
          document.querySelectorAll(".size-select").forEach(select => {
            select.addEventListener("change", () => {
              const row = select.closest(".product-row_test");
              const index = parseInt(row.dataset.index);
              cartData[index].size = select.value;
              updateProductPrice(index);
            });
          });

          document.querySelectorAll(".material-select").forEach(select => {
            select.addEventListener("change", () => {
              const row = select.closest(".product-row_test");
              const index = parseInt(row.dataset.index);
              cartData[index].material = select.value;
              updateProductPrice(index);
            });
          });
        }
        
        function attachCheckboxEvents() {
          const checkAll = document.getElementById("check-all");
          const checkGroups = document.querySelectorAll(".check-group");
          const checkItems = document.querySelectorAll(".check-item");
        
          checkAll.addEventListener("change", () => {
            const checked = checkAll.checked;
            checkGroups.forEach(group => group.checked = checked);
            checkItems.forEach(cb => cb.checked = checked);
            calculateCheckedTotal();
          });
        
          checkGroups.forEach(group => {
            group.addEventListener("change", () => {
              const shopNum = parseInt(group.getAttribute("data-shop"));
              const checked = group.checked;

              // Ch·ªâ ch·ªçn nh·ªØng s·∫£n ph·∫©m thu·ªôc shop ƒë√≥
              document.querySelectorAll(".product-row_test").forEach(row => {
                const index = parseInt(row.dataset.index); // B·∫Øt ƒë√∫ng index
                if (parseInt(cartData[index].number) === shopNum) {
                  row.querySelector(".check-item").checked = checked;
                }
              });

              // C·∫≠p nh·∫≠t tr·∫°ng th√°i t·ªïng
              const checkItems = document.querySelectorAll(".check-item");
              checkAll.checked = [...checkItems].every(cb => cb.checked);
              calculateCheckedTotal();
            });
          });
        
          checkItems.forEach(cb => {
            cb.addEventListener("change", (e) => {
              const row = e.target.closest(".product-row_test");
              const index = parseInt(row.dataset.index);
              const thisShop = cartData[index].number;

              const allChecked = [...checkItems].every(c => c.checked);
              checkAll.checked = allChecked;

              checkGroups.forEach(group => {
                const shopNum = parseInt(group.getAttribute("data-shop"));
                if (shopNum === thisShop) {
                  const allShopItems = [...document.querySelectorAll(`.product-row_test[data-index]`)].filter(row => cartData[parseInt(row.dataset.index)].number === shopNum);
                  const allCheckedInGroup = allShopItems.every(row => row.querySelector(".check-item").checked);
                  group.checked = allCheckedInGroup;
                }
              });

              calculateCheckedTotal();
            });
          });
        }
        
        renderCart();
        adaptMobileView();


        const popup = document.getElementById('image-popup');
        const popupImg = document.getElementById('popup-img');
        const closePopup = document.getElementById('close-popup');

        document.addEventListener('click', function(e) {
          if (e.target.closest('.product-info_test img')) {
            const img = e.target.closest('.product-info_test img');
            popupImg.src = img.src;
            popup.style.display = 'flex';
          }
        });

        closePopup.addEventListener('click', function() {
          popup.style.display = 'none';
        });

        let lastIsMobile = window.innerWidth <= 1000;

        window.addEventListener('resize', () => {
          const isMobileNow = window.innerWidth <= 1000;
          if (isMobileNow !== lastIsMobile) {
            renderCart();                    // üîÅ v·∫Ω l·∫°i gi·ªè h√†ng
            adaptMobileView();              // üí° ƒëi·ªÅu ch·ªânh layout mobile
            attachCheckboxEvents();         // ‚úÖ g·ªçi l·∫°i v√¨ checkbox b·ªã v·∫Ω l·∫°i
            updateOrderSummary();           // ‚úÖ c·∫≠p nh·∫≠t ti·ªÅn sau khi v·∫Ω xong
            updateTransferContent();
            lastIsMobile = isMobileNow;
          }
        });

        window.onload = function () {
            if (!getCookie("cookieConsent")) { 
                document.getElementById("cookie-popup").style.display = "block";
            }
            updateCartIcon(); // ‚úÖ th√™m d√≤ng n√†y ƒë·ªÉ update s·ªë l∆∞·ª£ng gi·ªè h√†ng
        };

        // M·ªü popup
 // ====== M·ªü popup khi nh·∫•n n√∫t Mua H√†ng ======
document.addEventListener('click', function(e) {
  if (e.target.matches('.checkout-btn_test')) {
    const cartItemsContainer = document.getElementById("checkout-cart-items");
    cartItemsContainer.innerHTML = "";

    const selectedRows = document.querySelectorAll('.product-row_test .check-item:checked');
    if (selectedRows.length === 0) {
      alert("‚ö†Ô∏è B·∫°n c·∫ßn ch·ªçn √≠t nh·∫•t 1 s·∫£n ph·∫©m ƒë·ªÉ ƒë·∫∑t h√†ng!");
      return;
    }

    selectedRows.forEach(cb => {
      const row = cb.closest('.product-row_test');
      const index = parseInt(row.dataset.index);
      const item = cartData[index]; // üõí l·∫•y t·ª´ bi·∫øn cartData b·∫°n ƒëang d√πng

      const sizeText = item.size && item.size !== 'M·∫∑c ƒë·ªãnh' ? item.size : '';
      const materialText = item.material && item.material !== 'M·∫∑c ƒë·ªãnh' ? item.material : '';
      const classifyText = [sizeText, materialText].filter(Boolean).join(' ');

      const info = `
        <div class="checkout-cart-item">
          <img src="${item.image}" alt="${item.name}">
          <div class="checkout-cart-item-name">
            ${item.name}${classifyText ? ` (${classifyText})` : ''}
          </div>
          <div class="checkout-cart-item-price">${item.price.toLocaleString()}ƒë</div>
          <div class="checkout-cart-item-qty">x${item.quantity}</div>
          <div class="checkout-cart-item-total">${(item.price * item.quantity).toLocaleString()}ƒë</div>
        </div>
      `;
      cartItemsContainer.innerHTML += info;
    });

    document.getElementById("checkout-popup").style.display = "flex";
    updateOrderSummary();
    updateTransferContent();

    document.querySelectorAll('.payment-option').forEach(option => {
    option.addEventListener('click', function() {
      document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('active'));
      this.classList.add('active');

      // Set value cho √¥ ·∫©n
      document.getElementById('payment-selected').value = this.dataset.value;

      updateOrderSummary();     
      updateTransferContent(); 
  });
});

// M·∫∑c ƒë·ªãnh ch·ªçn 50%
// Reset l·∫°i tr·∫°ng th√°i tr∆∞·ªõc
document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('active'));

// K√≠ch ho·∫°t m·∫∑c ƒë·ªãnh: ƒë·∫∑t c·ªçc 50%
document.querySelector('.payment-option[data-value="50"]').classList.add('active');

// C·∫≠p nh·∫≠t hidden input
document.getElementById('payment-selected').value = "50";


  }
});
// Update N·ªôi dung chuy·ªÉn kho·∫£n t·ª± ƒë·ªông
function updateOrderSummary() {
  let total = 0;
  const selectedRows = document.querySelectorAll('.product-row_test .check-item:checked');
  selectedRows.forEach(cb => {
    const row = cb.closest('.product-row_test');
    const index = parseInt(row.dataset.index);
    const item = cartData[index];
    total += item.price * item.quantity;
  });

  const paymentMethod = document.getElementById("payment-selected").value;
  const firstPayment = paymentMethod === "50" ? total * 0.5 : total;

  document.getElementById("order-total").textContent = total.toLocaleString() + "ƒë";
  document.getElementById("first-payment").textContent = firstPayment.toLocaleString() + "ƒë";
  document.getElementById("transfer-amount").textContent = firstPayment.toLocaleString() + "ƒë"; // ‚úÖ th√™m d√≤ng n√†y
}

function updateTransferContent() {
  const phone = document.getElementById('phone').value.trim();
  const paymentMethod = document.getElementById('payment-selected').value;

  const methodText = paymentMethod === "50" ? "ƒê·∫∑t c·ªçc 50%" : "Thanh to√°n 100%";

  let content = "[SƒêT] + " + methodText;
  if (phone) {
    content = `${phone} + ${methodText}`;
  }

  document.getElementById('transfer-content').textContent = content;
}

// G·ªçi h√†m khi nh·∫≠p SƒêT
document.getElementById("phone").addEventListener("input", updateTransferContent);

// G·ªçi h√†m khi ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n
document.querySelectorAll('.payment-option').forEach(opt => {
  opt.addEventListener('click', function() {
        document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('active'));
        this.classList.add('active');

        // C·∫≠p nh·∫≠t ph∆∞∆°ng th·ª©c thanh to√°n
        document.getElementById('payment-selected').value = this.dataset.value;

        updateOrderSummary();
        updateTransferContent(); // üõ†Ô∏è Th√™m d√≤ng n√†y ƒë·ªÉ n·ªôi dung chuy·ªÉn kho·∫£n ƒë·ªïi theo
    });
});


// ====== ƒê√≥ng popup ======
    document.getElementById("close-checkout").addEventListener("click", () => {
      document.getElementById("checkout-popup").style.display = "none";
    });

    // ====== X√°c nh·∫≠n ƒë·∫∑t h√†ng ======
    document.getElementById("form").addEventListener("submit", function (e) {
      e.preventDefault();

      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const address = document.getElementById("address").value.trim();
      const paymentSelected = document.getElementById("payment-selected").value; // Get the selected payment option
      const orderTotal = document.getElementById("order-total").textContent;  // Get the order total from the display
      const firstPayment = document.getElementById("first-payment").textContent; // Get the first payment amount
      const transferContent = document.getElementById("transfer-content").textContent; // Get transfer content

      if (!name || !phone || !address) {
        alert("‚ö†Ô∏è B·∫°n c·∫ßn nh·∫≠p ƒë·ªß H·ªç t√™n, SƒêT v√† ƒê·ªãa ch·ªâ!");
        return;
      }

      const formData = new FormData(this);
      formData.append('cart-items', JSON.stringify(getCartItems()));
      formData.append('order-total', orderTotal);
      formData.append('first-payment', firstPayment);
      formData.append('transfer-content', transferContent);
      formData.append('name', name);
      formData.append('phone', phone);
      formData.append('address', address);

      const formDataToSend = new URLSearchParams(formData).toString();
      console.log("formDataToSend:", formDataToSend); // ƒê·ªÉ ki·ªÉm tra d·ªØ li·ªáu ƒë∆∞·ª£c g·ª≠i

      fetch("https://script.google.com/macros/s/AKfycbwVbahbsN-IPtwLz7bS8DlJIBuTzyQgL3htgNwgPGGKlpbClpWvl8u7yrGycSTqD2jR/exec", {
        redirect: "follow",
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: formDataToSend,
      })
          .then(function (response) {
              alert("‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng!");
              document.getElementById("checkout-popup").style.display = "none";
              document.getElementById("form").reset();
          })
          .catch(error => {
              alert("‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng!");
              document.getElementById("checkout-popup").style.display = "none";
              document.getElementById("form").reset();
          });
        });

    function getCartItems() {
      const cartItemsToSend = [];
      const selectedRows = document.querySelectorAll('.product-row_test .check-item:checked');

      selectedRows.forEach(cb => {
        const row = cb.closest('.product-row_test');
        const index = parseInt(row.dataset.index);
        const item = cartData[index]; // Access the cartData array

        cartItemsToSend.push({
          id: item.id,
          name: item.name,
          quantity: item.quantity,
          size: item.size,
          material: item.material,
          price: item.price,
          // You might want to include other relevant details here
        });
      });

      return JSON.stringify(cartItemsToSend);
    }

    document.getElementById("close-popup-btn").addEventListener("click", function() {
        document.getElementById("checkout-popup").style.display = "none";
    });
</script> 
</body>
</html>


